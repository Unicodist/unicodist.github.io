<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Marvel Character List</title>
<style>
  :root{
    --bg:#0f1724;
    --card:#0b1220;
    --muted:#9aa7bb;
    --accent:#e63946;
    --glass: rgba(255,255,255,0.03);
    --radius:12px;
    font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  html,body{height:100%}
  body{
    margin:0;
    background:linear-gradient(180deg,#071124 0%, var(--bg) 70%);
    color:#e6eef6;
    padding:28px;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  header{
    display:flex;
    gap:16px;
    align-items:center;
    flex-wrap:wrap;
    margin-bottom:20px;
  }
  h1{
    margin:0;
    font-size:20px;
    letter-spacing:0.2px;
  }
  .controls{
    margin-left:auto;
    display:flex;
    gap:12px;
    align-items:center;
    flex-wrap:wrap;
  }

  .search {
    display:flex;
    background:var(--glass);
    padding:8px 10px;
    border-radius:999px;
    min-width:220px;
    align-items:center;
    gap:8px;
    border:1px solid rgba(255,255,255,0.04);
  }
  .search input{
    background:transparent;
    border:0;
    outline:none;
    color:inherit;
    width:200px;
    font-size:14px;
  }

  .filters{
    display:flex;
    gap:8px;
    align-items:center;
  }
  .chip{
    background:transparent;
    border:1px solid rgba(255,255,255,0.05);
    padding:6px 10px;
    border-radius:999px;
    cursor:pointer;
    font-size:13px;
    color:var(--muted);
  }
  .chip.active{
    background:linear-gradient(90deg, rgba(230,57,70,0.12), rgba(230,57,70,0.06));
    color: #ffd6da;
    border-color: rgba(230,57,70,0.25);
  }

  .controls select{
    background:transparent;
    border-radius:8px;
    border:1px solid rgba(255,255,255,0.04);
    padding:6px 8px;
    color:inherit;
    font-size:13px;
  }

  main{
    margin-top:16px;
  }
  .grid{
    display:grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap:16px;
  }

  .card{
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:var(--radius);
    padding:14px;
    box-shadow: 0 6px 18px rgba(2,6,23,0.6);
    border:1px solid rgba(255,255,255,0.03);
    display:flex;
    gap:12px;
    align-items:flex-start;
    transition:transform .12s ease, box-shadow .12s ease;
  }
  .card:hover{ transform: translateY(-6px); box-shadow: 0 14px 30px rgba(2,6,23,0.7); }

  .avatar{
    min-width:56px;
    min-height:56px;
    border-radius:10px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:700;
    font-size:20px;
    color:var(--card);
    background:linear-gradient(180deg,#ffdede,#ffe1c7);
    flex-shrink:0;
  }

  .meta{
    flex:1;
    min-width:0;
  }
  .name{
    display:flex;
    justify-content:space-between;
    gap:8px;
    align-items:center;
  }
  .name h3{
    margin:0;
    font-size:15px;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }
  .affiliation{
    font-size:12px;
    color:var(--muted);
    margin-top:6px;
  }
  .bio{
    font-size:13px;
    color:#cfe3f3;
    margin-top:8px;
    line-height:1.35;
    max-height:3.4em;
    overflow:hidden;
  }
  .meta .foot{
    margin-top:10px;
    display:flex;
    gap:8px;
    align-items:center;
    font-size:12px;
    color:var(--muted);
  }

  .empty{
    padding:32px;
    text-align:center;
    color:var(--muted);
  }

  footer{
    margin-top:18px;
    font-size:13px;
    color:var(--muted);
  }

  /* responsive adjustments */
  @media (max-width:520px){
    header{gap:10px}
    .search input{width:120px}
  }
</style>
</head>
<body>
<header>
  <div>
    <h1>Marvel character list</h1>
    <div style="font-size:13px;color:var(--muted)">Search, filter, and sort a curated set of characters</div>
  </div>

  <div class="controls" aria-hidden="false">
    <div class="search" title="Search by name or alias">
      ðŸ”Ž
      <input id="q" placeholder="Search characters (name, alias, keyword)" aria-label="Search characters" />
    </div>

    <div class="filters" id="filterBar" aria-label="Affiliation filters">
      <!-- chips injected by JS -->
    </div>

    <select id="sort" title="Sort characters">
      <option value="name-asc">Sort: Name A â†’ Z</option>
      <option value="name-desc">Sort: Name Z â†’ A</option>
      <option value="first-asc">Sort: First Appearance â†‘</option>
      <option value="first-desc">Sort: First Appearance â†“</option>
    </select>
  </div>
</header>

<main>
  <section class="grid" id="grid" aria-live="polite"></section>
  <div id="empty" class="empty" style="display:none">
    No characters match your search/filters.
  </div>
</main>

<footer>
  <small>Data is sample / illustrative. Add or edit characters in the script below.</small>
</footer>

<script>
/* ---- Data ----
   Each character: name, alias (optional), affiliation (array), first (year), bio
*/
const CHARACTERS = [
  { name: "Iron Man", alias: "Tony Stark", affiliation:["Avengers"], first:1963,
    bio:"Genius billionaire inventor who builds a powered suit of armor." },
  { name: "Captain America", alias: "Steve Rogers", affiliation:["Avengers"], first:1941,
    bio:"Super-soldier from WWII; symbol of leadership and courage." },
  { name: "Thor", alias: "Thor Odinson", affiliation:["Avengers"], first:1962,
    bio:"Norse god of thunder wielding the enchanted hammer MjÃ¶lnir." },
  { name: "Black Widow", alias: "Natasha Romanoff", affiliation:["Avengers"], first:1964,
    bio:"Highly trained spy, master martial artist and tactician." },
  { name: "Hulk", alias: "Bruce Banner", affiliation:["Avengers"], first:1962,
    bio:"Scientist whose emotional strain transforms him into the Hulk." },
  { name: "Spider-Man", alias: "Peter Parker", affiliation:["Avengers"], first:1962,
    bio:"Teen with spider-powers who balances responsibility and heroics." },
  { name: "Black Panther", alias: "T'Challa", affiliation:["Avengers"], first:1966,
    bio:"King of Wakanda; enhanced strength and advanced tech." },
  { name: "Doctor Strange", alias: "Stephen Strange", affiliation:["Avengers"], first:1963,
    bio:"Former surgeon turned Sorcerer Supreme defending mystical realms." },
  { name: "Scarlet Witch", alias: "Wanda Maximoff", affiliation:["Avengers"], first:1964,
    bio:"Reality-manipulating mutant with powerful chaos magic." },
  { name: "Wolverine", alias: "Logan", affiliation:["X-Men"], first:1974,
    bio:"Mutant with regenerative healing, adamantium skeleton, and claws." },
  { name: "Deadpool", alias: "Wade Wilson", affiliation:["Mercenary"], first:1991,
    bio:"Unpredictable antihero with regenerative powers and a sharp mouth." },
  { name: "Captain Marvel", alias: "Carol Danvers", affiliation:["Avengers"], first:1968,
    bio:"Pilot turned cosmic-powered hero with energy projection." },
  { name: "Loki", alias: "Loki Laufeyson", affiliation:["Asgardian"], first:1962,
    bio:"Trickster god and frequent foil to Thor; master of illusions." },
  { name: "Thanos", alias: "", affiliation:["Villain"], first:1973,
    bio:"Powerful cosmic warlord driven by apocalyptic visions." }
];

/* derive unique affiliation list */
const AFFS = Array.from(new Set(CHARACTERS.flatMap(c => c.affiliation))).sort();

/* state */
let activeAff = new Set(); // if empty => no affiliation filter (show all)
let q = "";
let sortBy = "name-asc";

/* DOM refs */
const grid = document.getElementById("grid");
const emptyEl = document.getElementById("empty");
const qInput = document.getElementById("q");
const filterBar = document.getElementById("filterBar");
const sortSelect = document.getElementById("sort");

/* render affiliation chips */
AFFS.forEach(a=>{
  const btn = document.createElement("button");
  btn.className = "chip";
  btn.textContent = a;
  btn.setAttribute("data-aff", a);
  btn.title = `Toggle filter: ${a}`;
  btn.onclick = () => {
    if(activeAff.has(a)) { activeAff.delete(a); btn.classList.remove("active"); }
    else { activeAff.add(a); btn.classList.add("active"); }
    render();
  };
  filterBar.appendChild(btn);
});

/* search listener */
qInput.addEventListener("input", (e)=>{
  q = e.target.value.trim().toLowerCase();
  render();
});

/* sort listener */
sortSelect.addEventListener("change", (e)=>{
  sortBy = e.target.value;
  render();
});

/* helper: simple highlight for query in strings */
function highlight(text){
  if(!q) return text;
  const idx = text.toLowerCase().indexOf(q);
  if(idx === -1) return text;
  return text.slice(0,idx) + "<mark style='background:rgba(230,57,70,0.18);color:inherit;padding:0 .12em;border-radius:3px;'>" + text.slice(idx, idx+q.length) + "</mark>" + text.slice(idx+q.length);
}

/* render grid */
function render(){
  // filter by q and affiliation
  const filtered = CHARACTERS.filter(c=>{
    // affiliation filter
    if(activeAff.size > 0){
      const intersects = c.affiliation.some(a => activeAff.has(a));
      if(!intersects) return false;
    }
    if(!q) return true;
    // check name, alias, affiliation, bio
    const hay = (c.name + " " + (c.alias||"") + " " + c.affiliation.join(" ") + " " + c.bio).toLowerCase();
    return hay.includes(q);
  });

  // sort
  filtered.sort((a,b)=>{
    if(sortBy === "name-asc") return a.name.localeCompare(b.name);
    if(sortBy === "name-desc") return b.name.localeCompare(a.name);
    if(sortBy === "first-asc") return a.first - b.first;
    if(sortBy === "first-desc") return b.first - a.first;
    return 0;
  });

  grid.innerHTML = "";
  if(filtered.length === 0){
    emptyEl.style.display = "block";
  } else {
    emptyEl.style.display = "none";
    for(const c of filtered){
      const card = document.createElement("article");
      card.className = "card";
      card.setAttribute("tabindex","0");
      // avatar: initials
      const initials = c.name.split(" ").map(p=>p[0]).slice(0,2).join("").toUpperCase();
      const avatar = document.createElement("div");
      avatar.className = "avatar";
      avatar.textContent = initials;
      // meta
      const meta = document.createElement("div");
      meta.className = "meta";
      meta.innerHTML = `
        <div class="name">
          <h3 title="${c.name}">${highlight(c.name + (c.alias ? " â€” " + c.alias : ""))}</h3>
          <div style="font-size:12px;color:var(--muted)">${c.first}</div>
        </div>
        <div class="affiliation">${c.affiliation.join(" â€¢ ")}</div>
        <div class="bio">${highlight(c.bio)}</div>
        <div class="foot">
          <div title="First appearance">ðŸ“š ${c.first}</div>
          <div style="margin-left:auto;font-style:italic;color:var(--muted)">${c.alias || "â€”"}</div>
        </div>
      `;
      card.appendChild(avatar);
      card.appendChild(meta);
      grid.appendChild(card);
    }
  }
}

/* initial render */
render();

/* keyboard: Enter on search focuses first card */
qInput.addEventListener("keydown",(e)=>{
  if(e.key === "Enter"){
    const first = grid.querySelector(".card");
    if(first) first.focus();
  }
});

/* expose a tiny API for adding characters (for advanced use) */
window.MarvelList = {
  add(character){
    // minimal validation
    if(!character || !character.name) throw new Error("Character needs a name");
    CHARACTERS.push(character);
    // update affiliations and chips if needed
    const newAffs = (character.affiliation || []);
    let chipAdded = false;
    newAffs.forEach(a=>{
      if(!AFFS.includes(a)){
        AFFS.push(a);
        AFFS.sort();
        const btn = document.createElement("button");
        btn.className = "chip";
        btn.textContent = a;
        btn.setAttribute("data-aff", a);
        btn.onclick = () => {
          if(activeAff.has(a)) { activeAff.delete(a); btn.classList.remove("active"); }
          else { activeAff.add(a); btn.classList.add("active"); }
          render();
        };
        filterBar.appendChild(btn);
        chipAdded = true;
      }
    });
    render();
    return { ok:true, chipAdded };
  }
};
</script>
</body>
</html>
